<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:f="http://java.sun.com/jsf/core"  
    xmlns:p="http://primefaces.org/ui">  
  
<h:head>
<style type="text/css">
                body{
                        font-family: Georgia,"Times New Roman",Times,serif;
                        font-size: 90%;    
                        background-image: url("img/laplatabici.jpg");                
                
                }
                .ui-menubar,.ui-menu-child,.ui-menu {                	
    				background:#178501 !important;
    				border:0px;
				}   
				/*.ui-selectonemenu-item.ui-state-highlight {
				    background-color: #178501;
				} */    
				
				.ui-menuitem-text{
					color:white;					
				}
					
					
				/*.ui-icon-close{
					background-color:white;
				}*/
							
				/*Style del header de REGISTRO*/		
				.styleGreen{    
				    /*background-color: #5CB85C!important;
				    background: #5CB85C!important;
				     border-width: 10px; */
				    color:white;				   
				    background-color:#178501;
				    font: 16px sans-serif;		
				    padding: 10px;
				    border-radius: 8px;				    
				    border-color: #178501; 
				    /*-moz-border-radius: 8px; -webkit-border-radius: 8px;*/			    				    	  				 
				} 
				
				/*style del ¡La plata en bici!*/
				.labelLP{
				 	color:white;				   				    
				    font: 21px sans-serif;	
				}
				
				.ui-button-text{
					color: white !important;
					font: 16px sans-serif;	
					background-color: #5CB85C !important;			    				   				    
				 }
												
				.ui-button{
					background-color: #5CB85C !important;										
					border-color: #5CB85C !important;			
				}							
				
				/*color del icono del boton entrar*/
				.ui-icon-extlink{
									   
				}							
				
				/*el color que pone cuando lo tocas con el puntero*/
				.ui-menuitem-link:VISITED{
					color: #5CB85C !important;
					background-color: #5CB85C !important;
				}				
											
				.ui-panelgrid tr, .ui-panelgrid td{
				   border: 0px !important;	
				   border-radius: 8px;				   
				   /*-moz-border-radius: 8px; -webkit-border-radius: 8px;*/	
				   border-color: #5CB85C !important;				   					
				}
										
</style>
<!-- color:#5CB85C;-->
</h:head>  

<h:body>  
 
 <h:form>  
    <p:growl id="messages"/> 
    <p:menubar id="menubar" >
       	 	
 	 	<p:menuitem value="label" >
 	 		<h:outputLabel for="label" value="La Plata en Bici" styleClass="labelLP"/>
 	 	</p:menuitem>
 	 	
 	 	<p:submenu label="#{PersonaBean.admin.nombre}" style="float:right" icon="ui-icon-document">           
            <p:menuitem value="Ver perfil" url="PerfilAdministrador.xhtml" />
            <p:separator />
            <p:menuitem value="Cerrar sesión" action="#{PersonaBean.logout}" />
        </p:submenu>
        
        <f:facet name="options">
	            
	    </f:facet>
       
    </p:menubar>   
</h:form>
<p:spacer height="40px"/>

<h:form id="form">
	 <p:growl id="msgs" showDetail="true" />

<!-- 		<p:dataTable var="usuario" value="#{PersonaBean.usuarios}" -->
			<p:dataTable var="usuario" value="#{PersonaBean.usuariosNoEliminados}"
			widgetVar="tablaUsuario"
			emptyMessage="No se encontraron usuarios con ese criterio."
			filteredValue="#{PersonaBean.usuariosFiltrados}">


			<f:facet name="header">
				<p:outputPanel>
					<h:outputText value="Buscar en todos los campos:" />
					<p:inputText id="globalFilter"
						onkeyup="PF('tablaUsuario').filter()" style="width:150px"
						placeholder="Ingrese texto..." />
				</p:outputPanel>
			</f:facet>

			<p:column filterBy="#{usuario.nombre}" headerText="Nombre"
				 filterMatchMode="contains">
				<h:outputText value="#{usuario.nombre}" />
			</p:column>

			<p:column filterBy="#{usuario.apellido}" headerText="Apellido"
				 filterMatchMode="contains">
				<h:outputText value="#{usuario.apellido}" />
			</p:column>


			<p:column filterBy="#{usuario.dni}" headerText="DNI"
				filterMatchMode="contains">
				<h:outputText value="#{usuario.dni}" />
			</p:column>

			<p:column filterBy="#{usuario.email}" headerText="Email"
				filterMatchMode="contains">
				<h:outputText value="#{usuario.email}" />
			</p:column>

			<p:column filterBy="#{usuario.sexo}" headerText="Sexo"
				 filterMatchMode="contains">
				<h:outputText value="#{usuario.sexo}" />
			</p:column>

			<p:column filterBy="#{usuario.domicilio}" headerText="Domicilio"
				filterMatchMode="contains">
				<h:outputText value="#{usuario.domicilio}" />
			</p:column>


			<p:column filterBy="#{usuario.fechaNacimiento}"
				headerText="Fecha de Nacimiento" 
				filterMatchMode="contains">
				<h:outputText value="#{usuario.fechaNacimiento}" />
			</p:column>


			<!-- ACA IRIA LA PARTE DE HABILITADO/DESHABILITADO  -->
			<p:column filterBy="#{usuario.habilitado}" headerText="Status"
				footerText="equals" filterMatchMode="equals">
				<f:facet name="filter">
					<p:selectOneButton onchange="PF('tablaUsuario').filter()">
						<f:converter converterId="javax.faces.Boolean" />
						<f:selectItem itemLabel="Todos" itemValue="" />
						<f:selectItem itemLabel="H" itemValue="true" />
						<f:selectItem itemLabel="D" itemValue="false" />
					</p:selectOneButton>
				</f:facet>
				<h:outputText value="#{usuario.habilitado ? 'Habilitado': 'Deshabilitado'}" />
			</p:column>


			<p:column style="width:32px;text-align: center">
				<p:commandButton update=":form:detalleUsuario"
					oncomplete="PF('usuarioDialog').show()" icon="ui-icon-search"
					title="View">
					<f:setPropertyActionListener value="#{usuario}"
						target="#{PersonaBean.usuarioSeleccionado}" />
				</p:commandButton>
			</p:column>
		</p:dataTable>
		
		<p:dialog header="Información Usuario" widgetVar="usuarioDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
		
        <p:outputPanel id="detalleUsuario" style="text-align:center;">
        	
            <p:panelGrid  columns="2" rendered="#{not empty PersonaBean.usuarioSeleccionado}" columnClasses="label,value">
                <f:facet name="header">
      				<!--<p:graphicImage name="demo/images/car/#{dtFilterView.selectedCar.brand}-big.gif"/>--> 
                </f:facet>                
						<h:outputText value="Nombre: " />
						<h:inputText value="#{PersonaBean.usuarioSeleccionado.nombre}" />

						<h:outputText value="Apellido: " />
						<h:inputText value="#{PersonaBean.usuarioSeleccionado.apellido}" />

						<h:outputText value="DNI: " />
						<h:inputText value="#{PersonaBean.usuarioSeleccionado.dni}" />

						<h:outputText value="Email: " />
						<h:inputText value="#{PersonaBean.usuarioSeleccionado.email}" />

						<h:outputText value="Sexo: " />
						<h:inputText value="#{PersonaBean.usuarioSeleccionado.sexo}" />

						<h:outputText value="Domicilio: " />
						<h:inputText value="#{PersonaBean.usuarioSeleccionado.domicilio}" />

					<h:outputText value="Fecha de Nacimiento: " />
						<p:calendar id="fechaNac"
							value="#{PersonaBean.usuarioSeleccionado.fechaNacimiento}" 
							navigator="true"
							maxdate="#{PersonaBean.fechaActual}"	
							effect="fold"
							required="true">
							<f:convertDateTime pattern="dd/MM/yy" />
						</p:calendar>
					
					<h:outputText value="Habilitacion" />
					<p:selectOneRadio value="#{PersonaBean.usuarioSeleccionado.habilitado}"
						required="true">
						<f:selectItem itemLabel="Habilitado" itemValue="true" />
						<f:selectItem itemLabel="Deshabilitado" itemValue="false" />
					</p:selectOneRadio>
					
					

					<p:commandButton value="Modificar" ajax="false"
							id="modificar"
							action="#{PersonaBean.AdminmodUsuario}" icon="ui-icon-check"
							validateClient="true"
							onclick="PF('modUsuarioEspera').show();"						
							/>

					<p:commandButton value="Eliminar" ajax="false" id="eliminar"
						action="#{PersonaBean.AdminEliminarUsuario}" icon="ui-icon-check"
						validateClient="true" onclick="PF('delUsuarioEspera').show();" />

					
						
            </p:panelGrid>
                      
        </p:outputPanel>
    </p:dialog>
    
    
</h:form>
		
		<p:confirmDialog
						message="El usuario ha sido borrado satisfactoriamente."
						widgetVar="delUsuarioExito" global="true" showEffect="fade"
						hideEffect="explode">
						<p:commandButton value="Ok" type="button"
						onclick="PF('delUsuarioExito').hide();"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					</p:confirmDialog>
					
					
					<p:confirmDialog
						message="El usuario esta siendo borrado."
						widgetVar="delUsuarioEspera" global="true" showEffect="fade"
						closable="false"
						hideEffect="explode">
					</p:confirmDialog>
					
					
					<p:confirmDialog
						message="El usuario esta siendo modificado."
						widgetVar="modUsuarioEspera" global="true" showEffect="fade"
						closable="false"
						hideEffect="explode">
					</p:confirmDialog>

					<p:confirmDialog
						message="El usuario ha sido modificado satisfactoriamente."
						widgetVar="modUsuarioExito" global="true" showEffect="fade"
						closable="false" hideEffect="explode">
						<p:commandButton value="Ok" type="button"
							onclick="PF('modUsuarioExito').hide();"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					</p:confirmDialog>

					<!-- FALTARIA EL RESTO DE LOS DATOS -->


</h:body>  
</html>  